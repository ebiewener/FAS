/*!
* Clamp.js 0.4
*
* Copyright 2011, Joseph Schmitt http://reusablebits.com, http://josephschmitt.me
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
(function(){window.$clamp=function(c,k){function s(a,b){n.getComputedStyle||(n.getComputedStyle=function(a,b){this.el=a;this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;"float"==b&&(b="styleFloat");c.test(b)&&(b=b.replace(c,function(a,b,c){return c.toUpperCase()}));return a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null};return this});return n.getComputedStyle(a,null).getPropertyValue(b)}function t(a){a=a||c.clientHeight;var b=u(c);return Math.max(Math.floor(a/b),0)}function u(a){var b=
s(a,"line-height");"normal"==b&&(b=1.2*parseInt(s(a,"font-size")));return parseInt(b)}function m(a){if(a.lastChild.children&&0<a.lastChild.children.length)return m(Array.prototype.slice.call(a.children).pop());if(a.lastChild&&a.lastChild.nodeValue&&""!=a.lastChild.nodeValue&&"\u2026"!=a.lastChild.nodeValue)return a.lastChild;a.lastChild.parentNode.removeChild(a.lastChild);return m(c)}function p(a,b){if(b){var d=a.nodeValue.replace(/\u2026/,"");e||(g=0<l.length?l.shift():"",e=d.split(g));1<e.length?
(q=e.pop(),r(a,e.join(g))):e=null;if(e){if(c.clientHeight<=b)if(0<=l.length&&""!=g)r(a,e.join(g)+g+q),e=null;else return!1}else""==g&&(r(a,""),a=m(c),l=h.splitOnChars.slice(0),g=l[0],q=e=null);h.animate?setTimeout(function(){p(a,b)},!0===h.animate?10:h.animate):p(a,b)}}function r(a,b){a.nodeValue=b+"\u2026"}k=k||{};var n=window,h={clamp:k.clamp||2,useNativeClamp:"undefined"!=typeof k.useNativeClamp?k.useNativeClamp:!0,splitOnChars:k.splitOnChars||[".","-","\u2013","\u2014"," "],animate:k.animate||
!1},d=c.style,w="undefined"!=typeof c.style.webkitLineClamp,f=h.clamp,v=f.indexOf&&(-1<f.indexOf("px")||-1<f.indexOf("em")),l=h.splitOnChars.slice(0),g=l[0],e,q;"auto"==f?f=t():v&&(f=t(parseInt(f)));w&&h.useNativeClamp?(d.overflow="hidden",d.textOverflow="ellipsis",d.webkitBoxOrient="vertical",d.display="-webkit-box",d.webkitLineClamp=f,v&&(d.height=h.clamp+"px")):(d=u(c)*f,d<=c.clientHeight&&p(m(c),d))}})();